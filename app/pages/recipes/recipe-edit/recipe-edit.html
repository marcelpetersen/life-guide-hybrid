<ion-navbar *navbar>
    <ion-title>Edit recipe</ion-title>
    <ion-buttons end>
        <button (click)="cancelRecipe()">
            <ion-icon name="close"></ion-icon>
        </button>
    </ion-buttons>
</ion-navbar>
<ion-content padding>
    <form #recipeForm="ngForm" (ngSubmit)="createRecipe()" novalidate>
        <ion-card>
            <ion-card-content>
                <ion-list>
                    <ion-item>
                        <ion-label>Recipe name</ion-label>
                        <ion-input type="text" [(ngModel)]="recipe.name" required></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label>Chef</ion-label>
                        <ion-input type="text" [(ngModel)]="recipe.chef" required></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label>Category</ion-label>
                        <ion-select [(ngModel)]="recipe.category" required>
                            <ion-option value="Breakfast">Breakfast</ion-option>
                            <ion-option value="Dessert">Dessert</ion-option>
                            <ion-option value="Dinner">Dinner</ion-option>
                            <ion-option value="Drink">Drink</ion-option>
                            <ion-option value="Grill">Grill</ion-option>
                            <ion-option value="Lunch">Lunch</ion-option>
                            <ion-option value="Salad">Salad</ion-option>
                            <ion-option value="Snack">Snack</ion-option>
                            <ion-option value="Soup">Soup</ion-option>
                        </ion-select>
                    </ion-item>
                    <ion-item>
                        <ion-label>Dietary</ion-label>
                        <ion-select [(ngModel)]="recipe.dietary" required>
                            <ion-option value="Gluten-free">Gluten-free</ion-option>
                            <ion-option value="High-fiber">High-fiber</ion-option>
                            <ion-option value="High-protein">High-protein</ion-option>
                            <ion-option value="Low-carb">Low-carb</ion-option>
                            <ion-option value="Low-fat">Low-fat</ion-option>
                            <ion-option value="Mediteranean">Mediteranean</ion-option>
                            <ion-option value="Vegan">Vegan</ion-option>
                            <ion-option value="Vegetarian">Vegetarian</ion-option>
                        </ion-select>
                    </ion-item>
                    <ion-item>
                        <ion-label>Preparation time</ion-label>
                        <ion-input type="number" [(ngModel)]="recipe.prepTime" required></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label>Cooking method</ion-label>
                        <ion-select [(ngModel)]="recipe.cookMethod" required>
                            <ion-option value="Baking">Baking</ion-option>
                            <ion-option value="Boiling">Boiling</ion-option>
                            <ion-option value="Braising">Braising</ion-option>
                            <ion-option value="Breading">Breading</ion-option>
                            <ion-option value="Brining">Brining</ion-option>
                            <ion-option value="Broasting">Broasting</ion-option>
                            <ion-option value="Browning">Browning</ion-option>
                            <ion-option value="Caramelization">Caramelization</ion-option>
                            <ion-option value="Casserole">Casserole</ion-option>
                            <ion-option value="Codling">Codling</ion-option>
                            <ion-option value="Curing">Curing</ion-option>
                            <ion-option value="'Dry roasting'">Dry roasting</ion-option>
                            <ion-option value="Fermentation">Fermentation</ion-option>
                            <ion-option value="Flambe">Flambe</ion-option>
                            <ion-option value="Frying">Frying</ion-option>
                            <ion-option value="Grilling">Grilling</ion-option>
                            <ion-option value="'Microwave cooking'">Microwave cooking</ion-option>
                            <ion-option value="Pasteurization">Pasteurization</ion-option>
                            <ion-option value="Pickling">Pickling</ion-option>
                            <ion-option value="Poaching">Poaching</ion-option>
                            <ion-option value="Puree">Puree</ion-option>
                            <ion-option value="Rotisserie">Rotisserie</ion-option>
                            <ion-option value="Sauteing">Sauteing</ion-option>
                            <ion-option value="Seasoning">Seasoning</ion-option>
                            <ion-option value="'Slow cooking'">Slow cooking</ion-option>
                            <ion-option value="Smoking">Smoking</ion-option>
                            <ion-option value="Steaming">Steaming</ion-option>
                        </ion-select>
                    </ion-item>
                    <ion-item>
                        <ion-label>Cooking time</ion-label>
                        <ion-input type="number" [(ngModel)]="recipe.cookTime" required></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label>Cooking temperature</ion-label>
                        <ion-input type="number" [(ngModel)]="recipe.cookTemperature" required></ion-input>
                    </ion-item>
                    <button clear primary type="button" (click)="searchIngredient()">
                        <ion-icon name="add"></ion-icon>
                        <span>Add ingredient</span>
                    </button>
                    <ion-item *ngFor="let ingredient of recipe.ingredients; let i = index">
                        <button type="button" clear item-left (click)="removeIngredient(i)">
                            <ion-icon danger name="trash"></ion-icon>
                        </button>
                        {{ ingredient.name }} {{ ingredient.chef ? ingredient.amount : ingredient.quantity + 'g' }}
                        <button type="button" clear item-right (click)="changeQuantity(ingredient)">
                            <ion-icon primary name="create"></ion-icon>
                        </button>
                    </ion-item>
                    <ion-item>
                        <ion-label>Servings</ion-label>
                        <ion-input type="number" [(ngModel)]="recipe.servings"></ion-input>
                    </ion-item>
                    <button clear primary type="button" (click)="addStep()">
                        <ion-icon name="add"></ion-icon>
                        <span>Add step</span>
                    </button>
                    <ion-item *ngFor="let step of recipe.steps; let i = index">
                        <button class="item-remove-button" clear item-left (click)="removeStep(i)">
                            <ion-icon danger name="trash"></ion-icon>
                        </button>
                        <ion-label floating>Step {{i + 1}}</ion-label>
                        <ion-input [(ngModel)]="recipeSteps[i]" required></ion-input>
                    </ion-item>
                </ion-list>
            </ion-card-content>
        </ion-card>
        <button block secondary type="submit" [disabled]="!recipeForm.form.valid">Prepare recipe</button>
    </form>
</ion-content>